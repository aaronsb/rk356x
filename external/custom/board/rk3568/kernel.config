# Kernel config fragment for SZ3568 board
# For mainline kernel 6.12 LTS

# Platform support
CONFIG_ARCH_ROCKCHIP=y
CONFIG_ARM64=y

# Rockchip SoC drivers
CONFIG_ROCKCHIP_IODOMAIN=y
CONFIG_ROCKCHIP_PM_DOMAINS=y
CONFIG_ROCKCHIP_GRF=y

# Clocks
CONFIG_COMMON_CLK_ROCKCHIP=y

# Pinctrl
CONFIG_PINCTRL_ROCKCHIP=y

# Ethernet drivers
CONFIG_STMMAC_ETH=y
CONFIG_STMMAC_PLATFORM=y
CONFIG_DWMAC_ROCKCHIP=y

# PHY drivers
CONFIG_REALTEK_PHY=y
CONFIG_PHYLIB=y
CONFIG_MAXIO_PHY=y

# Network support
CONFIG_NETDEVICES=y

# USB (enabled in base config, just ensuring)
CONFIG_USB=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_EHCI_HCD_PLATFORM=y
CONFIG_USB_OHCI_HCD=y
CONFIG_USB_OHCI_HCD_PLATFORM=y
CONFIG_PHY_ROCKCHIP_NANENG_COMBO_PHY=y
CONFIG_PHY_ROCKCHIP_INNO_USB2=y

# USB HID (keyboard/mouse support)
CONFIG_HID=y
CONFIG_HID_GENERIC=y
CONFIG_USB_HID=y
CONFIG_INPUT_EVDEV=y

# LED triggers (for status LEDs)
CONFIG_LEDS_TRIGGERS=y
CONFIG_LEDS_TRIGGER_TIMER=y
CONFIG_LEDS_TRIGGER_ONESHOT=y
CONFIG_LEDS_TRIGGER_HEARTBEAT=y
CONFIG_LEDS_TRIGGER_DEFAULT_ON=y

# HDMI/Display (enabled in base config, just ensuring)
CONFIG_DRM=y
CONFIG_DRM_ROCKCHIP=y
CONFIG_ROCKCHIP_VOP2=y
CONFIG_DRM_DW_HDMI=y
CONFIG_DRM_DW_HDMI_I2S_AUDIO=y
CONFIG_DRM_DW_HDMI_CEC=y

# GPU - Mali G52 via open-source Panfrost driver
# Using Panfrost instead of proprietary Mali driver for desktop OpenGL support
# Required for X11 desktop applications (lightdm-gtk-greeter, GTK3 apps)
# Mali blob only supports GLES, not desktop OpenGL needed by GTK/X11
CONFIG_DRM_PANFROST=y

# Disable vendor Mali drivers (wrong for this GPU)
# CONFIG_MALI_BIFROST is not set
# CONFIG_MALI_MIDGARD is not set
# CONFIG_MALI400 is not set
# CONFIG_MALI450 is not set
# CONFIG_MALI470 is not set

# Audio - I2S and codecs
CONFIG_SND_SOC=y
CONFIG_SND_SOC_ROCKCHIP=y
CONFIG_SND_SOC_ROCKCHIP_I2S_TDM=y
CONFIG_SND_SOC_RK817=y
CONFIG_SND_SIMPLE_CARD=y
CONFIG_SND_SIMPLE_CARD_UTILS=y

# RK809 PMIC (for audio codec)
CONFIG_MFD_RK808=y
CONFIG_REGULATOR_RK808=y

# RTC - HYM8563 on I2C (battery-backed real-time clock)
CONFIG_RTC_CLASS=y
CONFIG_RTC_DRV_HYM8563=y
CONFIG_RTC_HCTOSYS=y
CONFIG_RTC_HCTOSYS_DEVICE="rtc0"

# Framebuffer console support
CONFIG_DRM_FBDEV_EMULATION=y
CONFIG_FRAMEBUFFER_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY=y
CONFIG_FB=y
CONFIG_FB_CORE=y
CONFIG_LOGO=y
CONFIG_LOGO_LINUX_CLUT224=y

# SDIO/WiFi support for RTL8723DS
CONFIG_MMC=y
CONFIG_MMC_DW=y
CONFIG_MMC_DW_ROCKCHIP=y

# Wireless/cfg80211 for RTL8723DS driver
CONFIG_WIRELESS=y
CONFIG_CFG80211=m
CONFIG_CFG80211_WEXT=y
CONFIG_MAC80211=m
CONFIG_RFKILL=y
