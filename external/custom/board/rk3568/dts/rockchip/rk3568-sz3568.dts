#include "rk3568-sz3568-v10.dtsi"
#include "rk3568-linux.dtsi"
#include <dt-bindings/display/rockchip_vop.h>

/ {
        panel {
                compatible = "simple-panel";
                backlight = <&backlight>;
                power-supply = <&vcc3v3_lcd1_n>;
                enable-delay-ms = <20>;
                prepare-delay-ms = <20>;
                unprepare-delay-ms = <20>;
                disable-delay-ms = <20>;
                //bus-format = <MEDIA_BUS_FMT_RGB666_1X7X3_SPWG>;
                width-mm = <217>;
                height-mm = <136>;
        	status = "okay";

                disp_timings2: display-timings {
                        native-mode = <&timing0>;

                        timing0: timing0 {
                                clock-frequency = <138000000>;
                                hactive = <1920>;
                                vactive = <1080>;
                                hback-porch = <160>;
                                hfront-porch = <100>;
                                vback-porch = <30>;
                                vfront-porch = <10>;
                                hsync-len = <20>;
                                vsync-len = <6>;
                                hsync-active = <0>;
                                vsync-active = <0>;
                                de-active = <0>;
                                pixelclk-active = <0>;
                        };
                };

                ports {
                        #address-cells = <1>;
                        #size-cells = <0>;

			/**
			 *  Panel <----> LVDS0
			 *  Panel <----> LVDS1
			 */
			port@0 {
				reg = <0>;
				dual-lvds-odd-pixels;
				panel_in_lvds0: endpoint {
					remote-endpoint = <&lvds0_out_panel>;
				};
			};
			port@1 {
				reg = <1>;
				dual-lvds-even-pixels;
				panel_in_lvds1: endpoint {
					remote-endpoint = <&lvds1_out_panel>;
				};
			};
                };
        };
        edp-panel {
                compatible = "simple-panel";
                backlight = <&backlight>;
                power-supply = <&vcc3v3_lcd0_n>;
                prepare-delay-ms = <120>;
                enable-delay-ms = <120>;
                unprepare-delay-ms = <120>;
                disable-delay-ms = <120>;
        	status = "disabled";

                display-timings {
                        native-mode = <&edp_timing>;

                        edp_timing: timing0 {
                                clock-frequency = <120000000>;
                                hactive = <1920>;
                                vactive = <1080>;
                                hfront-porch = <12>;
                                hsync-len = <16>;
                                hback-porch = <48>;
                                vfront-porch = <8>;
                                vsync-len = <4>;
                                vback-porch = <8>;
                                hsync-active = <0>;
                                vsync-active = <0>;
                                de-active = <0>;
                                pixelclk-active = <0>;
                        };
                };

                port {
                        panel_in_edp: endpoint {
                                remote-endpoint = <&edp_out_panel>;
                        };
                };
        };
};

&rng {
        status = "okay";
};

&rockchip_suspend {
        status = "disabled";
};

&vop {
        support-multi-area;
};

&uart0 {
        status = "okay";
};
/*
&uart1 {
        pinctrl-names = "default";
        pinctrl-0 = <&uart1m1_xfer>;
        status = "okay";
};*/

&uart5 {
        pinctrl-names = "default";
        pinctrl-0 = <&uart5m1_xfer>;
        status = "okay";
};

&uart7 {
        pinctrl-names = "default";
        pinctrl-0 = <&uart7m2_xfer>;
        status = "okay";
};

&uart8 {
        pinctrl-names = "default";
        pinctrl-0 = <&uart8m1_xfer>;
        status = "okay";
};

&uart9 {
        pinctrl-names = "default";
        pinctrl-0 = <&uart9m2_xfer>;
        status = "okay";
};


&i2c0 {
        status = "okay";
         rtc@51 {
                compatible = "rtc,hym8563";
                reg = <0x51>;
                //irq_gpio = <&gpio4 25 IRQ_TYPE_EDGE_FALLING>;
        };

};

&i2c1 {
        status = "okay";

        gt9xxx: gt9xx@14 {
                compatible = "goodix,gt9xx";
                reg = <0x14>;
                //touch-gpio = <&gpio1 9 IRQ_TYPE_LEVEL_LOW>;
                //reset-gpio = <&gpio1 10 GPIO_ACTIVE_HIGH>;
                touch-gpio = <&gpio0 13 IRQ_TYPE_LEVEL_LOW>;
                reset-gpio = <&gpio0 14 GPIO_ACTIVE_HIGH>;
                max-x = <1536>;
                max-y = <2048>;
                tp-size = <970>;
                status = "okay";

        };

    gt911: gt911@14 {
                compatible = "goodix,gt9xx";
                reg = <0x14>;
                touch-gpio = <&gpio0 5 IRQ_TYPE_LEVEL_LOW>;
                reset-gpio = <&gpio0 12 GPIO_ACTIVE_HIGH>;
                max-x = <1280>;
                max-y = <800>;
                tp-size = <911>;
                status = "disabled";
        };
};

&i2c2 {
    status = "okay";
    pinctrl-0 = <&i2c2m1_xfer>;
        // tc_bridge: bridge@0f {

        //      compatible = "toshiba,tc358775";
        //      reg = <0x0f>;
        //      vdd-supply = <&vcc1v2_tc358775>;
        //      // vddio-supply = <&vcc1v2_tc358775>;
        //      // stby-gpios = <&gpio3 RK_PD5 GPIO_ACTIVE_LOW>;
        //      reset-gpios = <&gpio3 RK_PD5 GPIO_ACTIVE_LOW>;
        //      ports {
        //              #address-cells = <1>;
        //              #size-cells = <0>;
        //              port@0 {
        //                      reg = <0>;
        //                      d2l_in_test: endpoint {
        //                              remote-endpoint = <&dsi0_out>;
        //                      };
        //              };
        //              port@1 {
        //                      reg = <1>;
        //                      lvds_out: endpoint {
        //                              remote-endpoint = <&panel_in>;
        //                      };
        //              };
        //      };
        // };

        tc8775: tc8775@0f {
        compatible ="toshiba,tc358775";
        reg=<0x0f>;
        status="okay";
    };
        gm8775c@2c {
                               compatible = "gm8775c,mipi_to_lvds";
                               //reg = <0x2D>;
                               reg = <0x2c>;
                               status = "okay";
               };

};

&i2c3 {
        status = "okay";

     /*  gt9xxx: gt9xx@14 {
                compatible = "goodix,gt9xx";
                reg = <0x14>;
               // touch-gpio = <&gpio1 9 IRQ_TYPE_LEVEL_LOW>;
               // reset-gpio = <&gpio1 10 GPIO_ACTIVE_HIGH>;
                touch-gpio = <&gpio0 13 IRQ_TYPE_LEVEL_LOW>;
                reset-gpio = <&gpio0 14 GPIO_ACTIVE_HIGH>;
                max-x = <1536>;
                max-y = <2048>;
                tp-size = <970>;
                status = "okay";

        };*/
};


&backlight {
        status = "okay";
        enable-gpios = <&gpio0 29 0>;
        power-supply = <&vcc3v3_lcd0_n>;
        post-pwm-on-delay-ms = <100>;
        pwm-off-delay-ms = <10>;

};

&backlight1 {
        enable-gpios = <&gpio0 28 0>;
        power-supply = <&vcc3v3_lcd1_n>;
        post-pwm-on-delay-ms = <100>;
        pwm-off-delay-ms = <10>;
        status = "okay";
};


&dsi0 {
        status = "disabled";
};

&dsi0_in_vp0 {
        status = "disabled";
};

&dsi0_in_vp1 {
        status = "disabled";
};

&video_phy0 {
        status = "okay";
};

&dsi1 {
        enable-gpios = <&gpio0 RK_PB0 GPIO_ACTIVE_HIGH>;
        tc3587_res-gpios = <&gpio3 RK_PD5 GPIO_ACTIVE_HIGH>;
        tc3587-res-gpios-sw = "on";
        power-supply = <&vcc1v2_tc358775>;
        rockchip,lane-rate = <900>;
        status = "disabled";
};

&dsi1_in_vp0 {
        status = "disabled";
};

&dsi1_in_vp1 {
        status = "disabled";
};

&video_phy1 {
        status = "okay";
};

&edp {
        force-hpd;
        status = "disabled";

        ports {
                port@1 {
                        reg = <1>;

                        edp_out_panel: endpoint {
                                remote-endpoint = <&panel_in_edp>;
                        };
                };
        };
};

&edp_phy {
        status = "okay";
};

&edp_in_vp0 {
        status = "disabled";
};

&edp_in_vp1 {
        status = "disabled";
};
&route_edp {
        connect = <&vp1_out_edp>;
        status = "disabled";
};

&lvds {
        status = "disabled";
	dual-channel;

        ports {
                port@1 {
                        reg = <1>;

                        lvds0_out_panel: endpoint {
                                remote-endpoint = <&panel_in_lvds0>;
                        };
                };
        };

};

&lvds1 {
	status = "disabled";

	ports {
		port@1 {
			reg = <1>;
			lvds1_out_panel: endpoint {
				remote-endpoint = <&panel_in_lvds1>;
			};
		};
	};
};

&lvds_in_vp1 {
        status = "disabled";
};

&lvds_in_vp2 {
        status = "disabled";
};
&route_lvds {
        status = "disabled";
        connect = <&vp1_out_lvds>;
};

&dmc {
        status = "disabled";
        auto-freq-en = <0>;
};

&hdmi {
        status = "okay";
};

&route_hdmi{
        status = "okay";
};

&hdmi_sound {
        status = "okay";
};

&vp1{
        rockchip,plane-mask = <(1<< ROCKCHIP_VOP2_CLUSTER0 | 1 << ROCKCHIP_VOP2_ESMART0 | 1 << ROCKCHIP_VOP2_SMART0)>;
        rockchip,primary-plane = <ROCKCHIP_VOP2_SMART0>;
};

&vp0{
        rockchip,plane-mask = <(1<< ROCKCHIP_VOP2_CLUSTER1 | 1 << ROCKCHIP_VOP2_ESMART1 | 1 << ROCKCHIP_VOP2_SMART1)>;
        rockchip,primary-plane = <ROCKCHIP_VOP2_SMART1>;
};
/*
&vp0 {
        cursor-win-id = <ROCKCHIP_VOP2_CLUSTER0>;
};

&vp1 {
        cursor-win-id = <ROCKCHIP_VOP2_CLUSTER1>;
};*/

/* TODO: Fix NPU power domain issue - currently panics on boot
 * Error: "failed to get ack on domain 'npu'"
 * Temporarily disabled to allow boot - needs proper power management config
 *
 * Root cause: Mainline U-Boot intentionally leaves NPU/GPU power domains
 * disabled (arch/arm/mach-rockchip/rk3568/rk3568.c excludes them in
 * qos_priority_init). When kernel tries to power on NPU, it fails.
 *
 * The vendor DTSI (rk3568-sz3568.dtsi) enables NPU, so we override here.
 */
&rknpu {
	status = "disabled";
};

&rknpu_mmu {
	status = "disabled";
};
